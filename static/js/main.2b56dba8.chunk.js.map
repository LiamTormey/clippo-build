{"version":3,"sources":["pages/editor/style.module.css","components/Timestamps/style.module.css","logo.svg","components/YoutubeVideo/style.module.css","components/YoutubeVideo/YoutubeVideo.js","dispatcher.js","actions/timestamps.js","components/Timestamps/Timestamp.js","stores/timestamps.js","components/Timestamps/Timestamps.js","components/ControlPanel/ControlPanel.js","actions/video.js","pages/editor/index.js","stores/video.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","props","videoId","onStateChangeFunction","events","onStateChange","onErrorFunction","onError","onReadyFunction","onReady","id","ref","console","log","tag","document","createElement","text","firstScriptTag","getElementsByTagName","parentNode","insertBefore","init","window","e","player","Player","target","a","style","Dispatcher","nextActive","dispatch","type","data","active","classes","styleModule","timestamp","join","onDragOver","preventDefault","onDragStart","ev","dataTransfer","setData","place","onDrop","place1","place2","draggedPlace","getData","draggable","className","onChange","time","value","start","end","ourTimestampsStore","_timestamps","_active","undefined","this","sort","b","map","stamp","i","newStamp","ar","_cleanPlacement","_calculateActive","emit","Number","index","findIndex","p1","p2","place1Index","place2Index","find","push","firstIndex","lastPlace","length","currentPlace","forEach","element","nextActivePlace","action","_setTimestamps","timestamps","_addTimestamp","_setStart","_setEnd","_swapPlaces","_nextAcitve","EventEmitter","getTimestampStore","register","handleAction","bind","useState","TimestampsStore","getTimestamps","setTimestamps","changeListener","changeStart","changeEnd","changePlace","useEffect","on","removeListener","addit","ts","Timestamp","url","setURL","videoID","URL","searchParams","get","error","changeVideo","width","padding","backgroundColor","fontWeight","editor","left","upperLeft","YoutubeVideo","videoPlayer","setInterval","Math","floor","getCurrentTime","seekTo","getPlayerState","playVideo","lowerLeft","ControlPanel","right","onClick","Timestamps","videoStoreInstance","_videoPlayer","loadVideoById","_setVideoPlayer","_setVideoID","getVideoStore","App","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2b56dba8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"editor\":\"style_editor__G1Q5N\",\"right\":\"style_right__1ONM0\",\"left\":\"style_left__JU7dT\",\"upperLeft\":\"style_upperLeft__3RCLR\",\"lowerLeft\":\"style_lowerLeft__1nJQ3\",\"upperRight\":\"style_upperRight__By1OQ\",\"lowerRight\":\"style_lowerRight__165cc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"timestamp\":\"style_timestamp__2cQzq\",\"active\":\"style_active__6g9zj\"};","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"playerHolder\":\"style_playerHolder__3UFfD\"};","import React, { useEffect, useState } from 'react' \r\nimport styleModule from './style.module.css'\r\nexport default (props) => { \r\n    \r\n    let videoId = props.videoId \r\n    let onStateChangeFunction = props.events.onStateChange || (()=>{})\r\n    let onErrorFunction = props.events.onError || (()=>{})\r\n    let onReadyFunction = props.events.onReady || (()=>{})\r\n\r\n    //set up the functions the youtube api will call once its downloaded \r\n    const setUpHandler = (e) => { \r\n        window['onYouTubeIframeAPIReady'] = (e) => { \r\n            let player = new window['YT'].Player('player', {\r\n                videoId: videoId,\r\n                events: {\r\n                    'onStateChange': (e) => {onStateChangeFunction(e, player)},\r\n                    'onError': (e) => {onErrorFunction(e, player)},\r\n                    'onReady': (e) => {\r\n                        const IFRAME = e.target.a\r\n                        IFRAME.style=\"width:100%;height:100%\"\r\n                        onReadyFunction(e, player)\r\n                    }\r\n                } \r\n            });\r\n        }\r\n    }\r\n\r\n    //download the yt api script \r\n    const init = () => { \r\n        var tag = document.createElement('script');\r\n        //tag.src = \"https://www.youtube.com/iframe_api\";\r\n        tag.text = \"if (!window['YT']) {var YT = {loading: 0,loaded: 0};}if (!window['YTConfig']) {var YTConfig = {'host': 'http://www.youtube.com'};}if (!YT.loading) {YT.loading = 1;(function(){var l = [];YT.ready = function(f) {if (YT.loaded) {f();} else {l.push(f);}};window.onYTReady = function() {YT.loaded = 1;for (var i = 0; i < l.length; i++) {try {l[i]();} catch (e) {}}};YT.setConfig = function(c) {for (var k in c) {if (c.hasOwnProperty(k)) {YTConfig[k] = c[k];}}};var a = document.createElement('script');a.type = 'text/javascript';a.id = 'www-widgetapi-script';a.src = 'https://s.ytimg.com/yts/jsbin/www-widgetapi-vflWjyjuR/www-widgetapi.js';a.async = true;var c = document.currentScript;if (c) {var n = c.nonce || c.getAttribute('nonce');if (n) {a.setAttribute('nonce', n);}}var b = document.getElementsByTagName('script')[0];b.parentNode.insertBefore(a, b);})();}\"\r\n        var firstScriptTag = document.getElementsByTagName('script')[0];\r\n        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\r\n    }\r\n\r\n    const videoRefLoaded = () => { \r\n        console.log(\"VIDEO REF LOADED\")\r\n        init() \r\n        setUpHandler() \r\n    }\r\n    \r\n    return(\r\n        <div id='player' ref={videoRefLoaded}> </div>\r\n   )\r\n}","import { Dispatcher } from 'flux'\r\n\r\nexport default new Dispatcher()","import Dispatcher from '../dispatcher'\r\n\r\nexport const setTimestamps = (timestamps) => { \r\n    Dispatcher.dispatch({\r\n        type: \"SET_TIMESTAMPS\", \r\n        timestamps\r\n    })\r\n}\r\n\r\nexport const addTimestamp = (timestamp) => { \r\n    Dispatcher.dispatch({\r\n        type: \"ADD_TIMESTAMP\", \r\n        timestamp\r\n    })\r\n}\r\n\r\nexport const setStart = (place, time) => { \r\n    Dispatcher.dispatch({\r\n        type: \"SET_START\", \r\n        place,\r\n        time: time\r\n    })\r\n}\r\n\r\nexport const setEnd = (place, end) => { \r\n    Dispatcher.dispatch({\r\n        type: \"SET_END\", \r\n        place, \r\n        time: end\r\n    })\r\n}\r\n\r\nexport const swapPlaces = (place1, place2) => { \r\n    Dispatcher.dispatch({\r\n        type: \"SWAP_PLACES\", \r\n        place1,\r\n        place2\r\n    })\r\n}\r\n\r\nexport const nextActive = () => { \r\n    Dispatcher.dispatch({\r\n        type: \"NEXT_ACTIVE\"\r\n    })\r\n}\r\n\r\n\r\n","import React from 'react' \r\nimport {setStart, setEnd, swapPlaces} from \"../../actions/timestamps\"\r\nimport styleModule from \"./style.module.css\"\r\nexport default (props) => { \r\n\r\n    //when we get dropped on \r\n    const onDrop = (ev) => { \r\n        const draggedPlace = ev.dataTransfer.getData(\"place\");\r\n        //props.changePlace(draggedPlace, props.place)\r\n        swapPlaces(draggedPlace, props.place)\r\n    }\r\n    //when we get dragged\r\n    const onStartDrag = (ev) => { \r\n        ev.dataTransfer.setData(\"place\", props.place);\r\n    }\r\n\r\n    const onDragOver = (e) => { \r\n        e.preventDefault()\r\n    }\r\n\r\n    const startChange = (e) => { \r\n        //props.changeStart(props.place, e.target.value)\r\n        setStart(props.place, e.target.value)\r\n    }\r\n\r\n    const endChange = (e) => { \r\n        //props.changeEnd(props.place, e.target.value)\r\n        setEnd(props.place, e.target.value)\r\n    }\r\n    console.log(\"::\", props.data.active)\r\n\r\n    const classes = props.data.active ? (\r\n        [styleModule.timestamp, styleModule.active].join(\" \")\r\n    ) : (\r\n        [styleModule.timestamp].join(\" \")\r\n    );\r\n\r\n    return(<div onDragOver={onDragOver} onDragStart={onStartDrag} onDrop={onDrop} draggable=\"true\" className={classes}>\r\n        <input onChange={startChange} value={props.data.start}/> to\r\n        <input onChange={endChange} value={props.data.end}/>\r\n    </div>);\r\n}","import EventEmitter from 'events'\r\nimport Dispatcher from \"../dispatcher\"\r\n\r\nclass TimestampStore extends EventEmitter { \r\n\r\n    constructor() { \r\n        super();\r\n        this._timestamps = []  \r\n        this._active = undefined \r\n    }\r\n\r\n    _cleanPlacement() { \r\n        this._timestamps = this._timestamps.sort( (a,b) => {\r\n            if(a.place > b.place) { \r\n                return 1; \r\n            } else if(a.place < b.place) { \r\n                return -1;\r\n            } else { \r\n                return 0; \r\n            }\r\n        })\r\n        \r\n        this._timestamps = this._timestamps.map( (stamp, i) => { \r\n            let newStamp = {...stamp}\r\n            newStamp.place = i + 1\r\n            return newStamp; \r\n        })\r\n    }\r\n\r\n    _setTimestamps(ar) { \r\n        this._timestamps = [...ar]\r\n        this._cleanPlacement()\r\n        this._calculateActive()\r\n        this.emit('change')\r\n    }\r\n\r\n    _setStart(place, time) { \r\n        time = Number(time)\r\n        place = Number(place) \r\n        const index = this._timestamps.findIndex( (stamp) => {\r\n            return stamp.place == place \r\n        })\r\n        this._timestamps[index].start = time \r\n        this.emit('change')\r\n    }\r\n\r\n    _setEnd(place, time) { \r\n        time = Number(time)\r\n        place = Number(place) \r\n        console.log('set end ', place, time)\r\n        const index = this._timestamps.findIndex( (stamp) => {\r\n            return stamp.place == place \r\n        })\r\n        console.log(\"index \", index)\r\n        this._timestamps[index].end = time \r\n        this.emit('change')\r\n    }\r\n\r\n    _swapPlaces(p1, p2) { \r\n        const place1Index = this._timestamps.findIndex(stamp=>{return stamp.place == p1})\r\n        const place2Index = this._timestamps.findIndex(stamp=>{return stamp.place == p2})\r\n        this._timestamps[place1Index].place = p2 \r\n        this._timestamps[place2Index].place = p1 \r\n\r\n        //recalculate the _active \r\n        this._active = this._timestamps.find( (stamp) => stamp.active == true)\r\n\r\n        this._cleanPlacement()\r\n        this.emit('change')\r\n    }\r\n\r\n    _addTimestamp(timestamp) { \r\n        this._timestamps.push(timestamp)\r\n\r\n        if(this._active == undefined) { \r\n            this._calculateActive()\r\n        }\r\n\r\n        this._cleanPlacement()\r\n        this.emit('change')\r\n    }\r\n\r\n    getTimestamps() { \r\n        return [...this._timestamps]\r\n    }\r\n\r\n    _calculateActive() { \r\n        \r\n        let activeIndex = this._timestamps.findIndex(stamp => stamp.active == true)\r\n        \r\n        //if no active, set the first one \r\n        if(activeIndex == -1) { \r\n            let firstIndex = this._timestamps.findIndex(stamp => stamp.place == 1)\r\n            this._timestamps[firstIndex].active = true \r\n            this._active = this._timestamps[firstIndex]\r\n        }\r\n\r\n    }\r\n\r\n    _nextAcitve() { \r\n        this._cleanPlacement() \r\n        const lastPlace = this._timestamps[this._timestamps.length -1].place\r\n        const currentPlace = this._active.place \r\n\r\n        //get rid of the current active \r\n        this._active = undefined \r\n        this._timestamps.forEach(element => {\r\n            element.active = false; \r\n        });\r\n\r\n        const nextActivePlace = ( (currentPlace) % (lastPlace) ) + 1\r\n        console.log('next place is ', nextActivePlace)\r\n\r\n        this._active = this._timestamps.find( (stamp) => stamp.place == nextActivePlace)\r\n        this._active.active = true \r\n\r\n\r\n        console.log(\"CHANGES? \", this._timestamps)\r\n        this._cleanPlacement()\r\n        this.emit('change')\r\n    }\r\n\r\n    handleAction(action) {\r\n        \r\n        switch(action.type) { \r\n            case \"SET_TIMESTAMPS\": { \r\n                this._setTimestamps(action.timestamps)\r\n                break; \r\n            }\r\n            case \"ADD_TIMESTAMP\": { \r\n                this._addTimestamp(action.timestamp)\r\n                break; \r\n            }\r\n            case \"SET_START\": { \r\n                this._setStart(action.place, action.time)\r\n                break; \r\n            }\r\n            case \"SET_END\": { \r\n                this._setEnd(action.place, action.time)\r\n                break; \r\n            }\r\n            case \"SWAP_PLACES\": { \r\n                this._swapPlaces(action.place1, action.place2)\r\n                break; \r\n            }\r\n            case \"NEXT_ACTIVE\": { \r\n                this._nextAcitve();\r\n                break; \r\n            }\r\n            default: { \r\n                break; \r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst ourTimestampsStore = new TimestampStore\r\nwindow.getTimestampStore = () => { return ourTimestampsStore }\r\nDispatcher.register(ourTimestampsStore.handleAction.bind(ourTimestampsStore))\r\nexport default ourTimestampsStore;","import React, { useState, useEffect } from 'react' \r\nimport Timestamp from './Timestamp';\r\nimport TimestampsStore from \"../../stores/timestamps\"\r\nimport { setTimestamps } from \"../../actions/timestamps\"\r\n\r\nexport default (props) => { \r\n\r\n    const [timestamps, setTimestamps] = useState(TimestampsStore.getTimestamps())\r\n\r\n    function changeListener() { \r\n        setTimestamps(TimestampsStore.getTimestamps())\r\n    }\r\n\r\n    useEffect(()=>{\r\n        TimestampsStore.on('change', changeListener)\r\n        return function cleanUp() { \r\n            TimestampsStore.removeListener('change', changeListener)\r\n        }\r\n    })\r\n\r\n    function changeStart() { \r\n\r\n    }\r\n\r\n    function changeEnd() { \r\n\r\n    }\r\n\r\n    function changePlace() { \r\n\r\n    }\r\n\r\n    window.addit = (a) => { \r\n        setTimestamps(a) \r\n    }\r\n\r\n    console.log(\"RENDING WITH \", timestamps)\r\n    return(<>\r\n        {timestamps.map(ts => \r\n            <Timestamp place={ts.place} \r\n                changeStart={changeStart} \r\n                changeEnd={changeEnd} \r\n                changePlace={changePlace}\r\n                data={ts}>\r\n                hi\r\n            </Timestamp>\r\n        )}\r\n    </>);\r\n}","import React, { useState } from 'react' \r\nimport {setVideoID} from '../../actions/video'\r\n\r\nexport default (props) => { \r\n\r\n    const [url, setURL] = useState(\"https://www.youtube.com/watch?v=pxw-5qfJ1dk&t=5914s\")\r\n\r\n    function changeVideo(url) { \r\n        try {\r\n            const theURL = new URL(url)\r\n            const videoID = theURL.searchParams.get('v')\r\n            if(videoID) { \r\n                setVideoID(videoID)\r\n            }\r\n        } catch(e) {\r\n            console.error(\"wow we got an error\", e)\r\n        }\r\n    }\r\n    \r\n    changeVideo(url)\r\n    \r\n\r\n    function change(e) { \r\n        console.log('change event', e)\r\n        setURL(e.target.value)\r\n    }\r\n    \r\n    return(<> \r\n        \r\n        <input style={{width:'100%'}}value={url} onChange={change} />\r\n    </>);\r\n}","import Dispatcher from \"../dispatcher\"\r\n\r\nexport const setVideoPlayer = (videoPlayer) => { \r\n    Dispatcher.dispatch({\r\n        type: \"SET_VIDEO_PLAYER\", \r\n        player: videoPlayer\r\n    })\r\n}\r\n\r\nexport const setVideoID = (id) => { \r\n    Dispatcher.dispatch({\r\n        type: \"SET_VIDEO_ID\", \r\n        id\r\n    })\r\n}","import React, { useState } from 'react' \r\nimport styleModule from './style.module.css'\r\nimport YoutubeVideo from \"../../components/YoutubeVideo/YoutubeVideo\"\r\nimport Timestamps from \"../../components/Timestamps/Timestamps\"\r\nimport {setTimestamps, addTimestamp, nextActive} from \"../../actions/timestamps\"\r\nimport TimestampsStore from \"../../stores/timestamps\"\r\nimport {setVideoID, setVideoPlayer} from \"../../actions/video\"\r\nimport ControlPanel from '../../components/ControlPanel/ControlPanel'\r\n\r\nexport default () => { \r\n\r\n    setTimestamps([\r\n        {start: 10, end: 15},\r\n        {start: 40, end: 45},\r\n        {start: 80, end: 85},\r\n    ])\r\n    \r\n\r\n    return (<>\r\n        <div style={{padding: '1em', backgroundColor:'var(--color-primary)'}}>\r\n            <div style={{fontWeight:\"700\"}}> Clippy </div> \r\n        </div> \r\n        <div className={styleModule.editor}> \r\n            <div className={styleModule.left}> \r\n                <div className={styleModule.upperLeft}>\r\n                    <YoutubeVideo\r\n                        events={{\r\n                            'onStateChange': (e) => {\r\n                                console.log('state change')\r\n                            },\r\n                            'onError': (e) => {\r\n                                console.log('error')\r\n                            },\r\n                            'onReady': (e, player) => {\r\n                                setVideoPlayer(player)\r\n                                setInterval(()=>{\r\n                                    let time = Math.floor(player.getCurrentTime())\r\n                                        \r\n                                    if(TimestampsStore._active == undefined) { \r\n                                        console.log(\"No active index\")\r\n                                        return; \r\n                                    }\r\n\r\n                                    const active = TimestampsStore._active\r\n                                    if(time < active.start) { \r\n                                        player.seekTo(active.start)\r\n                                    }\r\n                                    if(time >= active.end) { \r\n                                        nextActive() \r\n                                        player.seekTo(TimestampsStore._active.start)\r\n                                        \r\n                                    }\r\n                                    console.log('state?')\r\n                                    if(player.getPlayerState() == 0) { \r\n                                        console.log('ended')\r\n                                        nextActive() \r\n                                        player.seekTo(TimestampsStore._active.start)\r\n                                        player.playVideo()\r\n                                    }\r\n\r\n                                    \r\n                                }, 500)\r\n                            }\r\n                        }}\r\n                    ></YoutubeVideo>\r\n                </div>\r\n                <div className={styleModule.lowerLeft}> \r\n                    <ControlPanel></ControlPanel>\r\n                </div>\r\n            </div> \r\n            <div className={styleModule.right}> \r\n                <button onClick={(e) => {\r\n                    addTimestamp({place:99999, start:12, end: 15})\r\n                }}>add</button>\r\n                <button>remove</button>\r\n                <Timestamps>\r\n                </Timestamps>\r\n            </div> \r\n        </div>  \r\n    </>);\r\n}\r\n","import Dispatcher from '../dispatcher'\r\nimport EventEmitter from 'events'\r\n\r\nclass VideoStore extends EventEmitter { \r\n    constructor() { \r\n        super() \r\n        this._videoPlayer = undefined \r\n    }\r\n\r\n\r\n    _setVideoPlayer(player) { \r\n        this._videoPlayer = player; \r\n        this.emit('change')\r\n    }\r\n\r\n    _setVideoID(id) { \r\n        if(this._videoPlayer == undefined) { console.error(\"THERE IS NOT VIDEO PLAYER IN STORE\"); return }\r\n        this._videoPlayer.loadVideoById(id)\r\n        this.emit('change')\r\n    }\r\n\r\n    handleAction(action) { \r\n        console.log(\"GOT ACTION?11\", action)\r\n        switch(action.type) { \r\n            case \"SET_VIDEO_PLAYER\": { \r\n                this._setVideoPlayer(action.player)\r\n                break; \r\n            }\r\n            case \"SET_VIDEO_ID\": { \r\n                this._setVideoID(action.id)\r\n                break; \r\n            }\r\n            default: { \r\n\r\n                break; \r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nconst videoStoreInstance = new VideoStore\r\nwindow.getVideoStore = () => {return videoStoreInstance} \r\nDispatcher.register(videoStoreInstance.handleAction.bind(videoStoreInstance))\r\nexport default videoStoreInstance; ","import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Editor from \"./pages/editor\"\n\n//we need to create out stores -_-\nimport TimestampsStore from \"./stores/timestamps\"\nimport VideoStore from \"./stores/video\"\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Editor></Editor>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}
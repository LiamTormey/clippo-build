(this.webpackJsonpclipple=this.webpackJsonpclipple||[]).push([[0],[,function(e,t,a){e.exports={editor:"style_editor__G1Q5N",right:"style_right__1ONM0",left:"style_left__JU7dT",upperLeft:"style_upperLeft__3RCLR",lowerLeft:"style_lowerLeft__1nJQ3",upperRight:"style_upperRight__By1OQ",lowerRight:"style_lowerRight__165cc"}},,,,,,,,function(e,t,a){e.exports={timestamp:"style_timestamp__2cQzq",active:"style_active__6g9zj"}},,,,,,function(e,t,a){e.exports=a(26)},,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},function(e,t,a){},function(e,t,a){e.exports={playerHolder:"style_playerHolder__3UFfD"}},,,function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(12),s=a.n(c),o=(a(20),a(21),a(22),a(1)),r=a.n(o),l=(a(23),function(e){var t=e.videoId,a=e.events.onStateChange||function(){},n=e.events.onError||function(){},c=e.events.onReady||function(){};return i.a.createElement("div",{id:"player",ref:function(){console.log("VIDEO REF LOADED"),function(){var e=document.createElement("script");e.text="if (!window['YT']) {var YT = {loading: 0,loaded: 0};}if (!window['YTConfig']) {var YTConfig = {'host': 'http://www.youtube.com'};}if (!YT.loading) {YT.loading = 1;(function(){var l = [];YT.ready = function(f) {if (YT.loaded) {f();} else {l.push(f);}};window.onYTReady = function() {YT.loaded = 1;for (var i = 0; i < l.length; i++) {try {l[i]();} catch (e) {}}};YT.setConfig = function(c) {for (var k in c) {if (c.hasOwnProperty(k)) {YTConfig[k] = c[k];}}};var a = document.createElement('script');a.type = 'text/javascript';a.id = 'www-widgetapi-script';a.src = 'https://s.ytimg.com/yts/jsbin/www-widgetapi-vflWjyjuR/www-widgetapi.js';a.async = true;var c = document.currentScript;if (c) {var n = c.nonce || c.getAttribute('nonce');if (n) {a.setAttribute('nonce', n);}}var b = document.getElementsByTagName('script')[0];b.parentNode.insertBefore(a, b);})();}";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),window.onYouTubeIframeAPIReady=function(e){var i=new window.YT.Player("player",{videoId:t,events:{onStateChange:function(e){a(e,i)},onError:function(e){n(e,i)},onReady:function(e){e.target.a.style="width:100%;height:100%",c(e,i)}}})}}}," ")}),u=a(6),m=new(a(13).Dispatcher),p=function(){m.dispatch({type:"NEXT_ACTIVE"})},d=a(9),h=a.n(d),f=function(e){console.log("::",e.data.active);var t=e.data.active?[h.a.timestamp,h.a.active].join(" "):[h.a.timestamp].join(" ");return i.a.createElement("div",{onDragOver:function(e){e.preventDefault()},onDragStart:function(t){t.dataTransfer.setData("place",e.place)},onDrop:function(t){var a,n,i=t.dataTransfer.getData("place");a=i,n=e.place,m.dispatch({type:"SWAP_PLACES",place1:a,place2:n})},draggable:"true",className:t},i.a.createElement("input",{onChange:function(t){var a,n;a=e.place,n=t.target.value,m.dispatch({type:"SET_START",place:a,time:n})},value:e.data.start})," to",i.a.createElement("input",{onChange:function(t){var a,n;a=e.place,n=t.target.value,m.dispatch({type:"SET_END",place:a,time:n})},value:e.data.end}))},v=a(10),_=a(14),g=a(2),y=a(3),E=a(7),w=a(4),T=a(8),b=a(5),S=a.n(b),I=new(function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(E.a)(this,Object(w.a)(t).call(this)))._timestamps=[],e._active=void 0,e}return Object(T.a)(t,e),Object(y.a)(t,[{key:"_cleanPlacement",value:function(){this._timestamps=this._timestamps.sort((function(e,t){return e.place>t.place?1:e.place<t.place?-1:0})),this._timestamps=this._timestamps.map((function(e,t){var a=Object(_.a)({},e);return a.place=t+1,a}))}},{key:"_setTimestamps",value:function(e){this._timestamps=Object(v.a)(e),this._cleanPlacement(),this._calculateActive(),this.emit("change")}},{key:"_setStart",value:function(e,t){t=Number(t),e=Number(e);var a=this._timestamps.findIndex((function(t){return t.place==e}));this._timestamps[a].start=t,this.emit("change")}},{key:"_setEnd",value:function(e,t){t=Number(t),e=Number(e),console.log("set end ",e,t);var a=this._timestamps.findIndex((function(t){return t.place==e}));console.log("index ",a),this._timestamps[a].end=t,this.emit("change")}},{key:"_swapPlaces",value:function(e,t){var a=this._timestamps.findIndex((function(t){return t.place==e})),n=this._timestamps.findIndex((function(e){return e.place==t}));this._timestamps[a].place=t,this._timestamps[n].place=e,this._active=this._timestamps.find((function(e){return 1==e.active})),this._cleanPlacement(),this.emit("change")}},{key:"_addTimestamp",value:function(e){this._timestamps.push(e),void 0==this._active&&this._calculateActive(),this._cleanPlacement(),this.emit("change")}},{key:"getTimestamps",value:function(){return Object(v.a)(this._timestamps)}},{key:"_calculateActive",value:function(){if(-1==this._timestamps.findIndex((function(e){return 1==e.active}))){var e=this._timestamps.findIndex((function(e){return 1==e.place}));this._timestamps[e].active=!0,this._active=this._timestamps[e]}}},{key:"_nextAcitve",value:function(){this._cleanPlacement();var e=this._timestamps[this._timestamps.length-1].place,t=this._active.place;this._active=void 0,this._timestamps.forEach((function(e){e.active=!1}));var a=t%e+1;console.log("next place is ",a),this._active=this._timestamps.find((function(e){return e.place==a})),this._active.active=!0,console.log("CHANGES? ",this._timestamps),this._cleanPlacement(),this.emit("change")}},{key:"handleAction",value:function(e){switch(e.type){case"SET_TIMESTAMPS":this._setTimestamps(e.timestamps);break;case"ADD_TIMESTAMP":this._addTimestamp(e.timestamp);break;case"SET_START":this._setStart(e.place,e.time);break;case"SET_END":this._setEnd(e.place,e.time);break;case"SWAP_PLACES":this._swapPlaces(e.place1,e.place2);break;case"NEXT_ACTIVE":this._nextAcitve()}}}]),t}(S.a));window.getTimestampStore=function(){return I},m.register(I.handleAction.bind(I));var k=I,A=function(e){var t=Object(n.useState)(k.getTimestamps()),a=Object(u.a)(t,2),c=a[0],s=a[1];function o(){s(k.getTimestamps())}function r(){}function l(){}function m(){}return Object(n.useEffect)((function(){return k.on("change",o),function(){k.removeListener("change",o)}})),window.addit=function(e){s(e)},console.log("RENDING WITH ",c),i.a.createElement(i.a.Fragment,null,c.map((function(e){return i.a.createElement(f,{place:e.place,changeStart:r,changeEnd:l,changePlace:m,data:e},"hi")})))},O=function(e){var t=Object(n.useState)("https://www.youtube.com/watch?v=pxw-5qfJ1dk&t=5914s"),a=Object(u.a)(t,2),c=a[0],s=a[1];return function(e){try{var t=new URL(e).searchParams.get("v");t&&(a=t,m.dispatch({type:"SET_VIDEO_ID",id:a}))}catch(n){console.error("wow we got an error",n)}var a}(c),i.a.createElement(i.a.Fragment,null,i.a.createElement("input",{style:{width:"100%"},value:c,onChange:function(e){console.log("change event",e),s(e.target.value)}}))},P=function(){var e;return e=[{start:10,end:15},{start:40,end:45},{start:80,end:85}],m.dispatch({type:"SET_TIMESTAMPS",timestamps:e}),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{padding:"1em",backgroundColor:"var(--color-primary)"}},i.a.createElement("div",{style:{fontWeight:"700"}}," Clippy ")),i.a.createElement("div",{className:r.a.editor},i.a.createElement("div",{className:r.a.left},i.a.createElement("div",{className:r.a.upperLeft},i.a.createElement(l,{events:{onStateChange:function(e){console.log("state change")},onError:function(e){console.log("error")},onReady:function(e,t){var a;a=t,m.dispatch({type:"SET_VIDEO_PLAYER",player:a}),setInterval((function(){var e=Math.floor(t.getCurrentTime());if(void 0!=k._active){var a=k._active;e<a.start&&t.seekTo(a.start),e>=a.end&&(p(),t.seekTo(k._active.start)),console.log("state?"),0==t.getPlayerState()&&(console.log("ended"),p(),t.seekTo(k._active.start),t.playVideo())}else console.log("No active index")}),500)}}})),i.a.createElement("div",{className:r.a.lowerLeft},i.a.createElement(O,null))),i.a.createElement("div",{className:r.a.right},i.a.createElement("button",{onClick:function(e){var t;t={place:99999,start:12,end:15},m.dispatch({type:"ADD_TIMESTAMP",timestamp:t})}},"add"),i.a.createElement("button",null,"remove"),i.a.createElement(A,null))))},N=new(function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(E.a)(this,Object(w.a)(t).call(this)))._videoPlayer=void 0,e}return Object(T.a)(t,e),Object(y.a)(t,[{key:"_setVideoPlayer",value:function(e){this._videoPlayer=e,this.emit("change")}},{key:"_setVideoID",value:function(e){void 0!=this._videoPlayer?(this._videoPlayer.loadVideoById(e),this.emit("change")):console.error("THERE IS NOT VIDEO PLAYER IN STORE")}},{key:"handleAction",value:function(e){switch(console.log("GOT ACTION?11",e),e.type){case"SET_VIDEO_PLAYER":this._setVideoPlayer(e.player);break;case"SET_VIDEO_ID":this._setVideoID(e.id)}}}]),t}(S.a));window.getVideoStore=function(){return N},m.register(N.handleAction.bind(N));var D=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(P,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[15,1,2]]]);
//# sourceMappingURL=main.2b56dba8.chunk.js.map
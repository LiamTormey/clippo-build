(this.webpackJsonpclipple=this.webpackJsonpclipple||[]).push([[0],[,function(e,t,a){e.exports={editor:"style_editor__G1Q5N",right:"style_right__1ONM0",left:"style_left__JU7dT",upperLeft:"style_upperLeft__3RCLR",lowerLeft:"style_lowerLeft__1nJQ3",upperRight:"style_upperRight__By1OQ",lowerRight:"style_lowerRight__165cc"}},,function(e,t,a){e.exports={inputField:"style_inputField__2LIox",inputTitle:"style_inputTitle__nyP8A",inputValue:"style_inputValue__bNoC0",tag:"style_tag__yIczj"}},,,,,,,function(e,t,a){e.exports={timestamp:"style_timestamp__2cQzq",active:"style_active__6g9zj"}},,,,,,function(e,t,a){e.exports=a(27)},,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},function(e,t,a){},function(e,t,a){e.exports={playerHolder:"style_playerHolder__3UFfD"}},,,function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(11),s=a.n(c),r=(a(21),a(22),a(23),a(1)),o=a.n(r),l=(a(24),function(e){var t=e.videoId,a=e.events.onStateChange||function(){},n=e.events.onError||function(){},c=e.events.onReady||function(){};return i.a.createElement("div",{id:"player",ref:function(){!function(){var e=document.createElement("script");e.text="if (!window['YT']) {var YT = {loading: 0,loaded: 0};}if (!window['YTConfig']) {var YTConfig = {'host': 'http://www.youtube.com'};}if (!YT.loading) {YT.loading = 1;(function(){var l = [];YT.ready = function(f) {if (YT.loaded) {f();} else {l.push(f);}};window.onYTReady = function() {YT.loaded = 1;for (var i = 0; i < l.length; i++) {try {l[i]();} catch (e) {}}};YT.setConfig = function(c) {for (var k in c) {if (c.hasOwnProperty(k)) {YTConfig[k] = c[k];}}};var a = document.createElement('script');a.type = 'text/javascript';a.id = 'www-widgetapi-script';a.src = 'https://s.ytimg.com/yts/jsbin/www-widgetapi-vflWjyjuR/www-widgetapi.js';a.async = true;var c = document.currentScript;if (c) {var n = c.nonce || c.getAttribute('nonce');if (n) {a.setAttribute('nonce', n);}}var b = document.getElementsByTagName('script')[0];b.parentNode.insertBefore(a, b);})();}";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),window.onYouTubeIframeAPIReady=function(e){var i=new window.YT.Player("player",{videoId:t,events:{onStateChange:function(e){a(e,i)},onError:function(e){n(e,i)},onReady:function(e){e.target.a.style="width:100%;height:100%",c(e,i)}}})}}}," ")}),u=a(2),m=new(a(15).Dispatcher),p=function(e){m.dispatch({type:"SET_TIMESTAMPS",timestamps:e})},d=function(e,t){m.dispatch({type:"SET_START",place:e,time:t})},h=function(e,t){m.dispatch({type:"SET_END",place:e,time:t})},v=function(){m.dispatch({type:"NEXT_ACTIVE"})},f=a(10),_=a.n(f),g=a(4),E=a(5),y=a(8),T=a(6),b=a(9),w=a(7),k=a.n(w),P=new(function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(y.a)(this,Object(T.a)(t).call(this)))._videoPlayer=void 0,e}return Object(b.a)(t,e),Object(E.a)(t,[{key:"getVideoID",value:function(){if(void 0!=this._videoPlayer)try{return new URL(this._videoPlayer.getVideoUrl()).searchParams.get("v")}catch(e){return}}},{key:"_setVideoPlayer",value:function(e){if(this._videoPlayer=e,this._videoID)return this._setVideoID(this._videoID),void(this._videoID=void 0);this.emit("change")}},{key:"_setVideoID",value:function(e){this._videoID=e,void 0!=this._videoPlayer&&(this._videoPlayer.loadVideoById(e),this.emit("change"))}},{key:"handleAction",value:function(e){switch(e.type){case"SET_VIDEO_PLAYER":this._setVideoPlayer(e.player);break;case"SET_VIDEO_ID":this._setVideoID(e.id)}}}]),t}(k.a));window.getVideoStore=function(){return P},m.register(P.handleAction.bind(P));var S=P,I=function(e){var t=e.data.active?[_.a.timestamp,_.a.active].join(" "):[_.a.timestamp].join(" ");return i.a.createElement("div",{onDragOver:function(e){e.preventDefault()},onDragStart:function(t){t.dataTransfer.setData("place",e.place)},onDrop:function(t){var a,n,i=t.dataTransfer.getData("place");a=i,n=e.place,m.dispatch({type:"SWAP_PLACES",place1:a,place2:n})},draggable:"true",className:t},i.a.createElement("input",{onChange:function(t){d(e.place,t.target.value)},value:e.data.start})," to",i.a.createElement("input",{onChange:function(t){h(e.place,t.target.value)},value:e.data.end}),i.a.createElement("button",{onClick:function(){d(e.place,Math.floor(S._videoPlayer.getCurrentTime()))}},"s"),i.a.createElement("button",{onClick:function(){h(e.place,Math.floor(S._videoPlayer.getCurrentTime()))}},"e"),i.a.createElement("button",{onClick:function(){var t;t=e.place,m.dispatch({type:"TIMESTAMP_REMOVE",place:t})}},"d"),i.a.createElement("button",{onClick:function(){var t;t=e.place,m.dispatch({type:"TIMESTAMP_PLAY",place:t})}},"p"),i.a.createElement("input",{placeholder:"name this timestamp"}))},A=a(12),O=a(13),j=new(function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(y.a)(this,Object(T.a)(t).call(this)))._timestamps=[],e._active=void 0,e._enabled=!0,e}return Object(b.a)(t,e),Object(E.a)(t,[{key:"_cleanPlacement",value:function(){this._timestamps=this._timestamps.sort((function(e,t){return e.place>t.place?1:e.place<t.place?-1:0})),this._timestamps=this._timestamps.map((function(e,t){var a=Object(O.a)({},e);return a.place=t+1,a}))}},{key:"_setTimestamps",value:function(e){this._timestamps=Object(A.a)(e),this._cleanPlacement(),this._calculateActive(),this.emit("change")}},{key:"_setStart",value:function(e,t){t=Number(t),e=Number(e);var a=this._timestamps.findIndex((function(t){return t.place==e}));this._timestamps[a].start=t,this.emit("change")}},{key:"_setEnd",value:function(e,t){t=Number(t),e=Number(e);var a=this._timestamps.findIndex((function(t){return t.place==e}));this._timestamps[a].end=t,this.emit("change")}},{key:"_swapPlaces",value:function(e,t){var a=this._timestamps.findIndex((function(t){return t.place==e})),n=this._timestamps.findIndex((function(e){return e.place==t}));this._timestamps[a].place=t,this._timestamps[n].place=e,this._active=this._timestamps.find((function(e){return 1==e.active})),this._cleanPlacement(),this.emit("change")}},{key:"_addTimestamp",value:function(e){this._timestamps.push(e),void 0==this._active&&this._calculateActive(),this._cleanPlacement(),this.emit("change")}},{key:"getTimestamps",value:function(){return Object(A.a)(this._timestamps)}},{key:"_calculateActive",value:function(){if(-1==this._timestamps.findIndex((function(e){return 1==e.active}))){var e=this._timestamps.findIndex((function(e){return 1==e.place}));this._timestamps[e].active=!0,this._active=this._timestamps[e]}}},{key:"_setTimestampsEnabled",value:function(e){this._enabled=e,this.emit("change")}},{key:"getEnabled",value:function(){return this._enabled}},{key:"_nextAcitve",value:function(e){this._cleanPlacement();var t=this._timestamps[this._timestamps.length-1].place,a=this._active.place;this._active=void 0,this._timestamps.forEach((function(e){e.active=!1}));var n=a%t+1;this._active=this._timestamps.find((function(e){return e.place==n})),this._active.active=!0,this._cleanPlacement(),void 0!=e&&1!=e||this.emit("change")}},{key:"_setTag",value:function(e,t,a){this._timestamps.forEach((function(e){delete e[t]})),this._timestamps.find((function(t){return t.place==e}))[t]=a,console.log(this._timestamps),this.emit("change")}},{key:"getWithTag",value:function(e,t){var a=this._timestamps.find((function(a){return a[e]==t}));return Object(O.a)({},a)}},{key:"_playTimestamp",value:function(e){this._active=void 0,this._timestamps.forEach((function(e){e.active=!1}));var t=this._timestamps.find((function(t){return t.place===e}));t.active=!0,this._active=t,this.emit("change")}},{key:"_removeTimestamp",value:function(e){this._nextAcitve(!1);var t=this._timestamps.findIndex((function(t){return t.place===e}));this._timestamps.splice(t,1),this._cleanPlacement(),this.emit("change")}},{key:"handleAction",value:function(e){switch(e.type){case"SET_TIMESTAMPS":this._setTimestamps(e.timestamps);break;case"ADD_TIMESTAMP":this._addTimestamp(e.timestamp);break;case"SET_START":this._setStart(e.place,e.time);break;case"SET_END":this._setEnd(e.place,e.time);break;case"SWAP_PLACES":this._swapPlaces(e.place1,e.place2);break;case"NEXT_ACTIVE":this._nextAcitve();break;case"SET_TIMESTAMPS_ENABLED":this._setTimestampsEnabled(e.enabled);break;case"SET_TIMESTAMP_TAG":this._setTag(e.place,e.name,e.value);break;case"TIMESTAMP_REMOVE":this._removeTimestamp(e.place);break;case"TIMESTAMP_PLAY":this._playTimestamp(e.place)}}}]),t}(k.a));window.getTimestampStore=function(){return j},m.register(j.handleAction.bind(j));var D=j,N=function(e){var t=Object(n.useState)(D.getTimestamps()),a=Object(u.a)(t,2),c=a[0],s=a[1];function r(){s(D.getTimestamps())}function o(){}function l(){}function m(){}return Object(n.useEffect)((function(){return D.on("change",r),function(){D.removeListener("change",r)}})),i.a.createElement(i.a.Fragment,null,c.map((function(e){return i.a.createElement(I,{place:e.place,changeStart:o,changeEnd:l,changePlace:m,data:e},"hi")})))},C=function(e){m.dispatch({type:"SET_VIDEO_ID",id:e})},M=a(3),R=a.n(M),L=function(e){return i.a.createElement("div",{className:R.a.inputField},i.a.createElement("div",{className:R.a.inputTitle},i.a.createElement("div",{className:R.a.tag},e.title)),i.a.createElement("input",{className:R.a.inputValue,value:e.value,onChange:e.onChange}))},x=function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)(D.getEnabled()),o=Object(u.a)(r,2),l=(o[0],o[1]);function p(){l(D.getEnabled())}return Object(n.useEffect)((function(){return D.on("change",p),S.on("change",(function(){})),function(){D.removeListener("change",p)}})),function(e){try{if(S.getVideoID()==new URL(e).searchParams.get("v"))return void console.log("Tried to refresh but video id is the same")}catch(a){}try{var t=new URL(e).searchParams.get("v");t&&C(t)}catch(a){console.error("wow we got an errorr",Object.keys(a))}}(c),i.a.createElement(i.a.Fragment,null,i.a.createElement(L,{title:"URL",value:c,onChange:function(e){s(e.target.value)}}),i.a.createElement("div",null,"Play Timestamps ",i.a.createElement("input",{checked:D.getEnabled(),onChange:function(e){var t;t=e.target.checked,m.dispatch({type:"SET_TIMESTAMPS_ENABLED",enabled:t})},type:"checkbox"}),"Repeat Timestamp ",i.a.createElement("input",{type:"checkbox"})))},V={},Y=function(){var e=new URL(window.location.href),t=e.searchParams.get("v");t&&C(t);var a=e.searchParams.get("t");try{var n=JSON.parse(a);p(n.map((function(e){return{start:e[0],end:e[1]}})))}catch(c){p([{start:10,end:15},{start:40,end:45},{start:80,end:85}])}return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{padding:"1em",backgroundColor:"var(--color-primary)"}},i.a.createElement("div",{style:{fontWeight:"700"}}," Clippy (this is under development. not all features work) ")),i.a.createElement("div",{className:o.a.editor},i.a.createElement("div",{className:o.a.left},i.a.createElement("div",{className:o.a.upperLeft},i.a.createElement(l,{events:{onStateChange:function(e){},onError:function(e){},onReady:function(e,t){var a;a=t,m.dispatch({type:"SET_VIDEO_PLAYER",player:a}),setInterval((function(){if(0!=D.getEnabled()){var e=Math.floor(t.getCurrentTime());if(void 0!=D._active){var a=D._active;if(a!=V)return t.seekTo(D._active.start),console.log("new active"),void(V=a);e<a.start&&(t.seekTo(a.start),console.log("start")),e>=a.end&&(v(),V=D._active,t.seekTo(D._active.start),console.log("start2")),0==t.getPlayerState()&&(v(),t.seekTo(D._active.start),t.playVideo())}else console.log("No active index")}}),500)}}})),i.a.createElement("div",{className:o.a.lowerLeft},i.a.createElement(x,null))),i.a.createElement("div",{className:o.a.right},i.a.createElement("button",{onClick:function(e){var t;t={place:99999,start:12,end:15},m.dispatch({type:"ADD_TIMESTAMP",timestamp:t})}},"add"),i.a.createElement("button",null,"remove"),i.a.createElement(N,null))))};var B=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(Y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[16,1,2]]]);
//# sourceMappingURL=main.231c3b11.chunk.js.map
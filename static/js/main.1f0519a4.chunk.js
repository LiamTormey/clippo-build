(this.webpackJsonpclipple=this.webpackJsonpclipple||[]).push([[0],[,function(e,t,a){e.exports={editor:"style_editor__G1Q5N",right:"style_right__1ONM0",left:"style_left__JU7dT",upperLeft:"style_upperLeft__3RCLR",lowerLeft:"style_lowerLeft__1nJQ3",upperRight:"style_upperRight__By1OQ",lowerRight:"style_lowerRight__165cc"}},,function(e,t,a){e.exports={inputField:"style_inputField__2LIox",inputTitle:"style_inputTitle__nyP8A",inputValue:"style_inputValue__bNoC0",tag:"style_tag__yIczj"}},,,,,,,function(e,t,a){e.exports={timestamp:"style_timestamp__2cQzq",active:"style_active__6g9zj"}},,,,,,function(e,t,a){e.exports=a(27)},,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},function(e,t,a){},function(e,t,a){e.exports={playerHolder:"style_playerHolder__3UFfD"}},,,function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(11),s=a.n(c),o=(a(21),a(22),a(23),a(1)),r=a.n(o),l=(a(24),function(e){var t=e.videoId,a=e.events.onStateChange||function(){},n=e.events.onError||function(){},c=e.events.onReady||function(){};return i.a.createElement("div",{id:"player",ref:function(){console.log("VIDEO REF LOADED"),function(){var e=document.createElement("script");e.text="if (!window['YT']) {var YT = {loading: 0,loaded: 0};}if (!window['YTConfig']) {var YTConfig = {'host': 'http://www.youtube.com'};}if (!YT.loading) {YT.loading = 1;(function(){var l = [];YT.ready = function(f) {if (YT.loaded) {f();} else {l.push(f);}};window.onYTReady = function() {YT.loaded = 1;for (var i = 0; i < l.length; i++) {try {l[i]();} catch (e) {}}};YT.setConfig = function(c) {for (var k in c) {if (c.hasOwnProperty(k)) {YTConfig[k] = c[k];}}};var a = document.createElement('script');a.type = 'text/javascript';a.id = 'www-widgetapi-script';a.src = 'https://s.ytimg.com/yts/jsbin/www-widgetapi-vflWjyjuR/www-widgetapi.js';a.async = true;var c = document.currentScript;if (c) {var n = c.nonce || c.getAttribute('nonce');if (n) {a.setAttribute('nonce', n);}}var b = document.getElementsByTagName('script')[0];b.parentNode.insertBefore(a, b);})();}";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),window.onYouTubeIframeAPIReady=function(e){var i=new window.YT.Player("player",{videoId:t,events:{onStateChange:function(e){a(e,i)},onError:function(e){n(e,i)},onReady:function(e){e.target.a.style="width:100%;height:100%",c(e,i)}}})}}}," ")}),u=a(2),m=new(a(14).Dispatcher),d=function(e,t){m.dispatch({type:"SET_START",place:e,time:t})},p=function(e,t){m.dispatch({type:"SET_END",place:e,time:t})},h=function(){m.dispatch({type:"NEXT_ACTIVE"})},f=a(10),v=a.n(f),_=a(4),g=a(5),E=a(8),y=a(6),T=a(9),b=a(7),w=a.n(b),A=new(function(e){function t(){var e;return Object(_.a)(this,t),(e=Object(E.a)(this,Object(y.a)(t).call(this)))._videoPlayer=void 0,e}return Object(T.a)(t,e),Object(g.a)(t,[{key:"getVideoID",value:function(){if(void 0!=this._videoPlayer)try{return new URL(this._videoPlayer.getVideoUrl()).searchParams.get("v")}catch(e){return}}},{key:"_setVideoPlayer",value:function(e){if(this._videoPlayer=e,this._videoID)return this._setVideoID(this._videoID),void(this._videoID=void 0);this.emit("change")}},{key:"_setVideoID",value:function(e){this._videoID=e,void 0!=this._videoPlayer&&(this._videoPlayer.loadVideoById(e),this.emit("change"))}},{key:"handleAction",value:function(e){switch(console.log("GOT ACTION?11",e),e.type){case"SET_VIDEO_PLAYER":this._setVideoPlayer(e.player);break;case"SET_VIDEO_ID":this._setVideoID(e.id)}}}]),t}(w.a));window.getVideoStore=function(){return A},m.register(A.handleAction.bind(A));var S=A,k=function(e){console.log("::",e.data.active);var t=e.data.active?[v.a.timestamp,v.a.active].join(" "):[v.a.timestamp].join(" ");return i.a.createElement("div",{onDragOver:function(e){e.preventDefault()},onDragStart:function(t){t.dataTransfer.setData("place",e.place)},onDrop:function(t){var a,n,i=t.dataTransfer.getData("place");a=i,n=e.place,m.dispatch({type:"SWAP_PLACES",place1:a,place2:n})},draggable:"true",className:t},i.a.createElement("input",{onChange:function(t){d(e.place,t.target.value)},value:e.data.start})," to",i.a.createElement("input",{onChange:function(t){p(e.place,t.target.value)},value:e.data.end}),i.a.createElement("button",{onClick:function(){d(e.place,Math.floor(S._videoPlayer.getCurrentTime()))}},"s"),i.a.createElement("button",{onClick:function(){p(e.place,Math.floor(S._videoPlayer.getCurrentTime()))}},"e"))},I=a(12),P=a(15),D=new(function(e){function t(){var e;return Object(_.a)(this,t),(e=Object(E.a)(this,Object(y.a)(t).call(this)))._timestamps=[],e._active=void 0,e._enabled=!0,e}return Object(T.a)(t,e),Object(g.a)(t,[{key:"_cleanPlacement",value:function(){this._timestamps=this._timestamps.sort((function(e,t){return e.place>t.place?1:e.place<t.place?-1:0})),this._timestamps=this._timestamps.map((function(e,t){var a=Object(P.a)({},e);return a.place=t+1,a}))}},{key:"_setTimestamps",value:function(e){this._timestamps=Object(I.a)(e),this._cleanPlacement(),this._calculateActive(),this.emit("change")}},{key:"_setStart",value:function(e,t){t=Number(t),e=Number(e);var a=this._timestamps.findIndex((function(t){return t.place==e}));this._timestamps[a].start=t,this.emit("change")}},{key:"_setEnd",value:function(e,t){t=Number(t),e=Number(e),console.log("set end ",e,t);var a=this._timestamps.findIndex((function(t){return t.place==e}));console.log("index ",a),this._timestamps[a].end=t,this.emit("change")}},{key:"_swapPlaces",value:function(e,t){var a=this._timestamps.findIndex((function(t){return t.place==e})),n=this._timestamps.findIndex((function(e){return e.place==t}));this._timestamps[a].place=t,this._timestamps[n].place=e,this._active=this._timestamps.find((function(e){return 1==e.active})),this._cleanPlacement(),this.emit("change")}},{key:"_addTimestamp",value:function(e){this._timestamps.push(e),void 0==this._active&&this._calculateActive(),this._cleanPlacement(),this.emit("change")}},{key:"getTimestamps",value:function(){return Object(I.a)(this._timestamps)}},{key:"_calculateActive",value:function(){if(-1==this._timestamps.findIndex((function(e){return 1==e.active}))){var e=this._timestamps.findIndex((function(e){return 1==e.place}));this._timestamps[e].active=!0,this._active=this._timestamps[e]}}},{key:"_setTimestampsEnabled",value:function(e){this._enabled=e,this.emit("change")}},{key:"getEnabled",value:function(){return this._enabled}},{key:"_nextAcitve",value:function(){this._cleanPlacement();var e=this._timestamps[this._timestamps.length-1].place,t=this._active.place;this._active=void 0,this._timestamps.forEach((function(e){e.active=!1}));var a=t%e+1;console.log("next place is ",a),this._active=this._timestamps.find((function(e){return e.place==a})),this._active.active=!0,console.log("CHANGES? ",this._timestamps),this._cleanPlacement(),this.emit("change")}},{key:"handleAction",value:function(e){switch(e.type){case"SET_TIMESTAMPS":this._setTimestamps(e.timestamps);break;case"ADD_TIMESTAMP":this._addTimestamp(e.timestamp);break;case"SET_START":this._setStart(e.place,e.time);break;case"SET_END":this._setEnd(e.place,e.time);break;case"SWAP_PLACES":this._swapPlaces(e.place1,e.place2);break;case"NEXT_ACTIVE":this._nextAcitve();break;case"SET_TIMESTAMPS_ENABLED":this._setTimestampsEnabled(e.enabled)}}}]),t}(w.a));window.getTimestampStore=function(){return D},m.register(D.handleAction.bind(D));var N=D,O=function(e){var t=Object(n.useState)(N.getTimestamps()),a=Object(u.a)(t,2),c=a[0],s=a[1];function o(){s(N.getTimestamps())}function r(){}function l(){}function m(){}return Object(n.useEffect)((function(){return N.on("change",o),function(){N.removeListener("change",o)}})),console.log("RENDING WITH ",c),i.a.createElement(i.a.Fragment,null,c.map((function(e){return i.a.createElement(k,{place:e.place,changeStart:r,changeEnd:l,changePlace:m,data:e},"hi")})))},j=a(3),C=a.n(j),R=function(e){return i.a.createElement("div",{className:C.a.inputField},i.a.createElement("div",{className:C.a.inputTitle},i.a.createElement("div",{className:C.a.tag},e.title)),i.a.createElement("input",{className:C.a.inputValue,value:e.value,onChange:e.onChange}))},x=function(e){var t=Object(n.useState)("https://www.youtube.com/watch?v=pxw-5qfJ1dk&t=5914s"),a=Object(u.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(N.getEnabled()),r=Object(u.a)(o,2),l=(r[0],r[1]);function d(){l(N.getEnabled())}function p(e){var t;if(S.getVideoID()!=new URL(e).searchParams.get("v"))try{var a=new URL(e).searchParams.get("v");a&&(t=a,m.dispatch({type:"SET_VIDEO_ID",id:t}))}catch(n){console.error("wow we got an errorr",n)}else console.log("Tried to refresh but video id is the same")}return Object(n.useEffect)((function(){return N.on("change",d),S.on("change",(function(){p(c)})),p(c),function(){N.removeListener("change",d)}})),i.a.createElement(i.a.Fragment,null,i.a.createElement(R,{title:"URL",value:c,onChange:function(e){console.log("change event",e),s(e.target.value)}}),i.a.createElement("div",null,"Play Timestamps ",i.a.createElement("input",{checked:N.getEnabled(),onChange:function(e){var t;t=e.target.checked,m.dispatch({type:"SET_TIMESTAMPS_ENABLED",enabled:t})},type:"checkbox"})))},L=function(){var e;return e=[{start:10,end:15},{start:40,end:45},{start:80,end:85}],m.dispatch({type:"SET_TIMESTAMPS",timestamps:e}),console.log("RAAAAAAAAAAAAAAAAAAAAAAAAATSSS"),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{padding:"1em",backgroundColor:"var(--color-primary)"}},i.a.createElement("div",{style:{fontWeight:"700"}}," Clippy ")),i.a.createElement("div",{className:r.a.editor},i.a.createElement("div",{className:r.a.left},i.a.createElement("div",{className:r.a.upperLeft},i.a.createElement(l,{events:{onStateChange:function(e){console.log("state change")},onError:function(e){console.log("error")},onReady:function(e,t){var a;a=t,m.dispatch({type:"SET_VIDEO_PLAYER",player:a}),setInterval((function(){if(0!=N.getEnabled()){var e=Math.floor(t.getCurrentTime());if(void 0!=N._active){var a=N._active;e<a.start&&t.seekTo(a.start),e>=a.end&&(h(),t.seekTo(N._active.start)),console.log("state?"),0==t.getPlayerState()&&(console.log("ended"),h(),t.seekTo(N._active.start),t.playVideo())}else console.log("No active index")}}),500)}}})),i.a.createElement("div",{className:r.a.lowerLeft},i.a.createElement(x,null))),i.a.createElement("div",{className:r.a.right},i.a.createElement("button",{onClick:function(e){var t;t={place:99999,start:12,end:15},m.dispatch({type:"ADD_TIMESTAMP",timestamp:t})}},"add"),i.a.createElement("button",null,"remove"),i.a.createElement(O,null))))};var V=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[16,1,2]]]);
//# sourceMappingURL=main.1f0519a4.chunk.js.map